import{t as ut,c as Gt,a as K,n as ct}from"../chunks/DcyT26n5.js";import"../chunks/CWWkpyyQ.js";import{a0 as Nt,U as Zt,f as bt,a6 as H,k as e,a4 as I,Y as st,aH as lt,a8 as X,s as V,a9 as W,a5 as Pt,a1 as yt,aI as se,a7 as kt,l as le,aJ as zt}from"../chunks/BPI7EAEX.js";import{d as oe,s as at}from"../chunks/ByDB1ul6.js";import{a as Xt,p as ue}from"../chunks/D84Utw2H.js";import{e as ot,i as mt}from"../chunks/DLsdbygI.js";import{b as St}from"../chunks/Bvxkvdfh.js";import{i as ce}from"../chunks/ByKr5JJ4.js";import{o as fe}from"../chunks/b1ufZUxi.js";import{d as he,i as ge,a as Ut,b as me,l as $t,c as de}from"../chunks/DUXprHVX.js";import{s as J,d as te,f as ee,e as Tt,t as ne,l as _e,m as ve}from"../chunks/CKRZrJ39.js";import{s as S}from"../chunks/Dbfd4NMs.js";import{b as dt}from"../chunks/CdYTcLjg.js";import{p as it}from"../chunks/DfZPznz0.js";function pe(t){let a;for(;a=t.sourceEvent;)t=a;return t}function It(t,a){if(t=pe(t),a===void 0&&(a=t.currentTarget),a){var d=a.ownerSVGElement||a;if(d.createSVGPoint){var p=d.createSVGPoint();return p.x=t.clientX,p.y=t.clientY,p=p.matrixTransform(a.getScreenCTM().inverse()),[p.x,p.y]}if(a.getBoundingClientRect){var b=a.getBoundingClientRect();return[t.clientX-b.left-a.clientLeft,t.clientY-b.top-a.clientTop]}}return[t.pageX,t.pageY]}const Mt={capture:!0,passive:!1};function Bt(t){t.preventDefault(),t.stopImmediatePropagation()}function ye(t){var a=t.document.documentElement,d=J(t).on("dragstart.drag",Bt,Mt);"onselectstart"in a?d.on("selectstart.drag",Bt,Mt):(a.__noselect=a.style.MozUserSelect,a.style.MozUserSelect="none")}function be(t,a){var d=t.document.documentElement,p=J(t).on("dragstart.drag",null);a&&(p.on("click.drag",Bt,Mt),setTimeout(function(){p.on("click.drag",null)},0)),"onselectstart"in d?p.on("selectstart.drag",null):(d.style.MozUserSelect=d.__noselect,delete d.__noselect)}const At=t=>()=>t;function xe(t,{sourceEvent:a,target:d,selection:p,mode:b,dispatch:T}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:a,enumerable:!0,configurable:!0},target:{value:d,enumerable:!0,configurable:!0},selection:{value:p,enumerable:!0,configurable:!0},mode:{value:b,enumerable:!0,configurable:!0},_:{value:T}})}function we(t){t.stopImmediatePropagation()}function Et(t){t.preventDefault(),t.stopImmediatePropagation()}var Kt={name:"drag"},Ct={name:"space"},nt={name:"handle"},rt={name:"center"};const{abs:jt,max:L,min:F}=Math;function Ht(t){return[+t[0],+t[1]]}function Jt(t){return[Ht(t[0]),Ht(t[1])]}var xt={name:"x",handles:["w","e"].map(Rt),input:function(t,a){return t==null?null:[[+t[0],a[0][1]],[+t[1],a[1][1]]]},output:function(t){return t&&[t[0][0],t[1][0]]}},Dt={},Z={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},qt={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},Wt={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},ke={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},ze={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};function Rt(t){return{type:t}}function Se(t){return!t.ctrlKey&&!t.button}function Ae(){var t=this.ownerSVGElement||this;return t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]}function Ee(){return navigator.maxTouchPoints||"ontouchstart"in this}function Yt(t){for(;!t.__brush;)if(!(t=t.parentNode))return;return t.__brush}function Ce(t){return t[0][0]===t[1][0]||t[0][1]===t[1][1]}function De(){return Ye(xt)}function Ye(t){var a=Ae,d=Se,p=Ee,b=!0,T=he("start","brush","end"),h=6,E;function x(n){var r=n.property("__brush",$).selectAll(".overlay").data([Rt("overlay")]);r.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",Z.overlay).merge(r).each(function(){var s=Yt(this).extent;J(this).attr("x",s[0][0]).attr("y",s[0][1]).attr("width",s[1][0]-s[0][0]).attr("height",s[1][1]-s[0][1])}),n.selectAll(".selection").data([Rt("selection")]).enter().append("rect").attr("class","selection").attr("cursor",Z.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var i=n.selectAll(".handle").data(t.handles,function(s){return s.type});i.exit().remove(),i.enter().append("rect").attr("class",function(s){return"handle handle--"+s.type}).attr("cursor",function(s){return Z[s.type]}),n.each(C).attr("fill","none").attr("pointer-events","all").on("mousedown.brush",G).filter(p).on("touchstart.brush",G).on("touchmove.brush",q).on("touchend.brush touchcancel.brush",Q).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}x.move=function(n,r,i){n.tween?n.on("start.brush",function(s){P(this,arguments).beforestart().start(s)}).on("interrupt.brush end.brush",function(s){P(this,arguments).end(s)}).tween("brush",function(){var s=this,c=s.__brush,m=P(s,arguments),A=c.selection,_=t.input(typeof r=="function"?r.apply(this,arguments):r,c.extent),f=ge(A,_);function k(v){c.selection=v===1&&_===null?null:f(v),C.call(s),m.brush()}return A!==null&&_!==null?k:k(1)}):n.each(function(){var s=this,c=arguments,m=s.__brush,A=t.input(typeof r=="function"?r.apply(s,c):r,m.extent),_=P(s,c).beforestart();Ut(s),m.selection=A===null?null:A,C.call(s),_.start(i).brush(i).end(i)})},x.clear=function(n,r){x.move(n,null,r)};function C(){var n=J(this),r=Yt(this).selection;r?(n.selectAll(".selection").style("display",null).attr("x",r[0][0]).attr("y",r[0][1]).attr("width",r[1][0]-r[0][0]).attr("height",r[1][1]-r[0][1]),n.selectAll(".handle").style("display",null).attr("x",function(i){return i.type[i.type.length-1]==="e"?r[1][0]-h/2:r[0][0]-h/2}).attr("y",function(i){return i.type[0]==="s"?r[1][1]-h/2:r[0][1]-h/2}).attr("width",function(i){return i.type==="n"||i.type==="s"?r[1][0]-r[0][0]+h:h}).attr("height",function(i){return i.type==="e"||i.type==="w"?r[1][1]-r[0][1]+h:h})):n.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function P(n,r,i){var s=n.__brush.emitter;return s&&(!i||!s.clean)?s:new j(n,r,i)}function j(n,r,i){this.that=n,this.args=r,this.state=n.__brush,this.active=0,this.clean=i}j.prototype={beforestart:function(){return++this.active===1&&(this.state.emitter=this,this.starting=!0),this},start:function(n,r){return this.starting?(this.starting=!1,this.emit("start",n,r)):this.emit("brush",n),this},brush:function(n,r){return this.emit("brush",n,r),this},end:function(n,r){return--this.active===0&&(delete this.state.emitter,this.emit("end",n,r)),this},emit:function(n,r,i){var s=J(this.that).datum();T.call(n,this.that,new xe(n,{sourceEvent:r,target:x,selection:t.output(this.state.selection),mode:i,dispatch:T}),s)}};function G(n){if(E&&!n.touches||!d.apply(this,arguments))return;var r=this,i=n.target.__data__.type,s=(b&&n.metaKey?i="overlay":i)==="selection"?Kt:b&&n.altKey?rt:nt,c=t===Dt?null:ke[i],m=t===xt?null:ze[i],A=Yt(r),_=A.extent,f=A.selection,k=_[0][0],v,w,l=_[0][1],o,u,z=_[1][0],y,D,O=_[1][1],M,B,Y=0,R=0,wt,_t=c&&m&&b&&n.shiftKey,vt,pt,U=Array.from(n.touches||[n],g=>{const N=g.identifier;return g=It(g,r),g.point0=g.slice(),g.identifier=N,g});Ut(r);var ft=P(r,arguments,!0).beforestart();if(i==="overlay"){f&&(wt=!0);const g=[U[0],U[1]||U[0]];A.selection=f=[[v=t===Dt?k:F(g[0][0],g[1][0]),o=t===xt?l:F(g[0][1],g[1][1])],[y=t===Dt?z:L(g[0][0],g[1][0]),M=t===xt?O:L(g[0][1],g[1][1])]],U.length>1&&et(n)}else v=f[0][0],o=f[0][1],y=f[1][0],M=f[1][1];w=v,u=o,D=y,B=M;var Vt=J(r).attr("pointer-events","none"),ht=Vt.selectAll(".overlay").attr("cursor",Z[i]);if(n.touches)ft.moved=Lt,ft.ended=Ft;else{var Ot=J(n.view).on("mousemove.brush",Lt,!0).on("mouseup.brush",Ft,!0);b&&Ot.on("keydown.brush",ae,!0).on("keyup.brush",ie,!0),ye(n.view)}C.call(r),ft.start(n,s.name);function Lt(g){for(const N of g.changedTouches||[g])for(const gt of U)gt.identifier===N.identifier&&(gt.cur=It(N,r));if(_t&&!vt&&!pt&&U.length===1){const N=U[0];jt(N.cur[0]-N[0])>jt(N.cur[1]-N[1])?pt=!0:vt=!0}for(const N of U)N.cur&&(N[0]=N.cur[0],N[1]=N.cur[1]);wt=!0,Et(g),et(g)}function et(g){const N=U[0],gt=N.point0;var tt;switch(Y=N[0]-gt[0],R=N[1]-gt[1],s){case Ct:case Kt:{c&&(Y=L(k-v,F(z-y,Y)),w=v+Y,D=y+Y),m&&(R=L(l-o,F(O-M,R)),u=o+R,B=M+R);break}case nt:{U[1]?(c&&(w=L(k,F(z,U[0][0])),D=L(k,F(z,U[1][0])),c=1),m&&(u=L(l,F(O,U[0][1])),B=L(l,F(O,U[1][1])),m=1)):(c<0?(Y=L(k-v,F(z-v,Y)),w=v+Y,D=y):c>0&&(Y=L(k-y,F(z-y,Y)),w=v,D=y+Y),m<0?(R=L(l-o,F(O-o,R)),u=o+R,B=M):m>0&&(R=L(l-M,F(O-M,R)),u=o,B=M+R));break}case rt:{c&&(w=L(k,F(z,v-Y*c)),D=L(k,F(z,y+Y*c))),m&&(u=L(l,F(O,o-R*m)),B=L(l,F(O,M+R*m)));break}}D<w&&(c*=-1,tt=v,v=y,y=tt,tt=w,w=D,D=tt,i in qt&&ht.attr("cursor",Z[i=qt[i]])),B<u&&(m*=-1,tt=o,o=M,M=tt,tt=u,u=B,B=tt,i in Wt&&ht.attr("cursor",Z[i=Wt[i]])),A.selection&&(f=A.selection),vt&&(w=f[0][0],D=f[1][0]),pt&&(u=f[0][1],B=f[1][1]),(f[0][0]!==w||f[0][1]!==u||f[1][0]!==D||f[1][1]!==B)&&(A.selection=[[w,u],[D,B]],C.call(r),ft.brush(g,s.name))}function Ft(g){if(we(g),g.touches){if(g.touches.length)return;E&&clearTimeout(E),E=setTimeout(function(){E=null},500)}else be(g.view,wt),Ot.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);Vt.attr("pointer-events","all"),ht.attr("cursor",Z.overlay),A.selection&&(f=A.selection),Ce(f)&&(A.selection=null,C.call(r)),ft.end(g,s.name)}function ae(g){switch(g.keyCode){case 16:{_t=c&&m;break}case 18:{s===nt&&(c&&(y=D-Y*c,v=w+Y*c),m&&(M=B-R*m,o=u+R*m),s=rt,et(g));break}case 32:{(s===nt||s===rt)&&(c<0?y=D-Y:c>0&&(v=w-Y),m<0?M=B-R:m>0&&(o=u-R),s=Ct,ht.attr("cursor",Z.selection),et(g));break}default:return}Et(g)}function ie(g){switch(g.keyCode){case 16:{_t&&(vt=pt=_t=!1,et(g));break}case 18:{s===rt&&(c<0?y=D:c>0&&(v=w),m<0?M=B:m>0&&(o=u),s=nt,et(g));break}case 32:{s===Ct&&(g.altKey?(c&&(y=D-Y*c,v=w+Y*c),m&&(M=B-R*m,o=u+R*m),s=rt):(c<0?y=D:c>0&&(v=w),m<0?M=B:m>0&&(o=u),s=nt),ht.attr("cursor",Z[i]),et(g));break}default:return}Et(g)}}function q(n){P(this,arguments).moved(n)}function Q(n){P(this,arguments).ended(n)}function $(){var n=this.__brush||{selection:null};return n.extent=Jt(a.apply(this,arguments)),n.dim=t,n}return x.extent=function(n){return arguments.length?(a=typeof n=="function"?n:At(Jt(n)),x):a},x.filter=function(n){return arguments.length?(d=typeof n=="function"?n:At(!!n),x):d},x.touchable=function(n){return arguments.length?(p=typeof n=="function"?n:At(!!n),x):p},x.handleSize=function(n){return arguments.length?(h=+n,x):h},x.keyModifiers=function(n){return arguments.length?(b=!!n,x):b},x.on=function(){var n=T.on.apply(T,arguments);return n===T?x:n},x}function Qt(t,a,d){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+a)/6,(t._y0+4*t._y1+d)/6)}function re(t){this._context=t}re.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Qt(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,a){switch(t=+t,a=+a,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,a):this._context.moveTo(t,a);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Qt(this,t,a);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=a}};function Te(t){return new re(t)}var Me=(t,a,d)=>a(e(d)),Be=ct('<circle stroke="steelblue" stroke-width="2" class="svelte-mz9u0u"></circle>'),Re=(t,a,d)=>a(e(d)),Ne=ct('<circle stroke="steelblue" stroke-width="2" class="svelte-mz9u0u"></circle>'),Pe=ut('<svg class="svelte-mz9u0u"><g class="points svelte-mz9u0u"></g><g></g><g></g></svg> <div class="selectedInfo svelte-mz9u0u"> </div>',1);function Xe(t,a){Nt(a,!0);const d=it(a,"height",3,500),p=it(a,"width",3,600);let b=lt(void 0);const T={top:15,bottom:50,left:60,right:10},h={top:T.top,right:p()-T.right,bottom:d()-T.bottom,left:T.left},E=[3,15];function x(_,f,k){if(k.length===0)return null;let v=[];return f==="x"&&(v=[h.left,h.right]),f==="y"&&(v=[h.bottom,h.top]),f==="size"&&(v=E),typeof k[0][_]=="string"?me().domain(k.map(w=>w[_])).range(v).padding(.2):typeof k[0][_]=="number"?$t().domain(Tt(k,w=>w[_])).range(v):k[0][_]instanceof Date?ne().domain(Tt(k,w=>w[_])).range(v):null}const C=st(()=>x(a.x,"x",a.movies)),P=st(()=>x(a.y,"y",a.movies)),j=st(()=>a.size?x(a.size,"size",a.movies):null);let G=lt(void 0),q=lt(void 0);function Q(){!e(C)||!e(P)||(J(e(G)).call(te(e(C)).ticks(6)).selectAll("text").attr("transform","rotate(30)").style("text-anchor","start"),J(e(q)).call(ee(e(P))))}function $(_){W(b,ue(e(b)===_?void 0:_))}Zt(()=>{Q()});var n=Pe(),r=bt(n),i=H(r);ot(i,21,()=>a.movies,mt,(_,f)=>{var k=Gt(),v=bt(k);{var w=o=>{var u=Gt(),z=bt(u);ot(z,17,()=>e(f).genres,mt,(y,D)=>{var O=Be();O.__click=[Me,$,f],I((M,B,Y)=>{S(O,"cx",M),S(O,"cy",B),S(O,"r",Y),S(O,"fill",e(f)===e(b)?"steelblue":"transparent"),S(O,"opacity",e(f)===e(b)?1:.5)},[()=>e(C)?e(C)(e(D))+e(C).bandwidth()/2:h.left,()=>e(P)?e(P)(e(f)[a.y]):h.bottom,()=>e(j)?e(j)(e(f)[a.size]):E[0]]),K(y,O)}),K(o,u)},l=o=>{var u=Ne();u.__click=[Re,$,f],I((z,y,D)=>{S(u,"cx",z),S(u,"cy",y),S(u,"r",D),S(u,"fill",e(f)===e(b)?"steelblue":"transparent"),S(u,"opacity",e(f)===e(b)?1:.5)},[()=>e(C)?e(C)(e(f)[a.x]):h.left,()=>e(P)?e(P)(e(f)[a.y]):h.bottom,()=>e(j)?e(j)(e(f)[a.size]):E[0]]),K(o,u)};Xt(v,o=>{a.x==="genres"?o(w):o(l,!1)})}K(_,k)}),X(i);var s=V(i);dt(s,_=>W(G,_),()=>e(G));var c=V(s);dt(c,_=>W(q,_),()=>e(q)),X(r);var m=V(r,2),A=H(m,!0);X(m),I(_=>{S(r,"width",p()),S(r,"height",d()),S(s,"transform",`translate(0, ${h.bottom??""})`),S(c,"transform",`translate(${h.left}, 0)`),at(A,_)},[()=>e(b)?JSON.stringify(e(b),null,2):"Click on a point to see details"]),K(t,n),Pt()}oe(["click"]);var Ve=ct('<circle r="3" fill="red"></circle>'),Oe=ct('<text text-anchor="middle"> </text>'),Le=ct('<text text-anchor="middle">Brush to select a range</text>'),Fe=ct('<svg class="line svelte-1e6h4yb"><path fill="none" stroke="black" stroke-width="2"></path><g class="points"></g><g></g><g></g><g class="brush svelte-1e6h4yb"></g><text text-anchor="middle">Number of Movies by Year:</text><!></svg>');function Ge(t,a){Nt(a,!0);let d=it(a,"data",19,()=>[]),p=it(a,"yearRange",15),b=it(a,"height",3,150),T=it(a,"width",3,600);const h={top:15,bottom:50,left:30,right:10};let E={top:h.top,right:T()-h.right,bottom:b()-h.bottom,left:h.left};const x=st(()=>ne().domain(Tt(d().map(l=>new Date(l.x)))).range([E.left,E.right])),C=st(()=>$t().domain([0,ve(d(),l=>l.y)||10]).range([E.bottom,E.top])),P=_e().x(l=>e(x)(new Date(l.x))).y(l=>e(C)(l.y)).curve(Te),j=st(()=>()=>P(d())||"");let G=lt(void 0),q=lt(void 0),Q=lt(void 0);function $(){!e(x)||!e(C)||(J(e(G)).call(te(e(x))),J(e(q)).call(ee(e(C))))}function n(l){const o=l.selection;if(o){const[u,z]=o.map(e(x).invert);p([u,z])}else p(void 0)}function r(){const l=De().extent([[E.left,E.top],[E.right,E.bottom]]).on("brush end",n);J(e(Q)).call(l)}Zt(()=>{r(),$()});var i=Fe(),s=H(i),c=V(s);ot(c,21,d,l=>l.x,(l,o)=>{var u=Ve();I((z,y)=>{S(u,"cx",z),S(u,"cy",y)},[()=>e(x)(new Date(e(o).x)),()=>e(C)(e(o).y)]),K(l,u)}),X(c);var m=V(c);dt(m,l=>W(G,l),()=>e(G));var A=V(m);dt(A,l=>W(q,l),()=>e(q));var _=V(A);dt(_,l=>W(Q,l),()=>e(Q));var f=V(_),k=V(f);{var v=l=>{var o=Oe(),u=H(o);X(o),I((z,y)=>{S(o,"x",T()/2),S(o,"y",b()-20),at(u,`${z??""} - ${y??""}`)},[()=>p()[0].getFullYear(),()=>p()[1].getFullYear()]),K(l,o)},w=l=>{var o=Le();I(()=>{S(o,"x",T()/2),S(o,"y",b()-20)}),K(l,o)};Xt(k,l=>{p()?l(v):l(w,!1)})}X(i),I(()=>{S(i,"width",T()),S(i,"height",b()),S(s,"d",e(j)),S(m,"transform",`translate(0, ${E.bottom??""})`),S(A,"transform",`translate(${E.left}, 0)`),S(f,"x",T()/2),S(f,"y",b()-5)}),K(t,i),Pt()}var Ue=ut("<option> </option>"),Ie=ut("<option> </option>"),Ke=ut("<option> </option>"),je=ut('<div class="selectors svelte-a9n7ci"><label>X Axis: <select class="svelte-a9n7ci"></select></label> <label>Y Axis: <select class="svelte-a9n7ci"></select></label> <label>Size: <select class="svelte-a9n7ci"></select></label></div> <!> <br> <!>',1),He=ut('<div class="container svelte-a9n7ci"><h1>Summer Movies</h1> <p> </p> <!></div>');function un(t,a){Nt(a,!1);let d=yt([]),p=yt(),b=yt([]);function T(n){let r={};n.forEach(s=>{const c=s.year.getFullYear();r[c]=(r[c]||0)+1});let i=Object.entries(r).map(([s,c])=>({x:new Date(Number(s),0,1).getTime(),y:c})).sort((s,c)=>s.x-c.x);return console.log("Processed Year Count Data:",i),i}let h=yt({x:"year",y:"average_rating",size:"num_votes"});const E=["tconst","title_type","primary_title","original_title","year","runtime_minutes","genres","simple_title","average_rating","num_votes"];async function x(){try{const r=await de("./summer_movies.csv");W(d,r.map(i=>({tconst:i.tconst,title_type:i.title_type,primary_title:i.primary_title,original_title:i.original_title,year:new Date(Number(i.year),0,1),runtime_minutes:Number(i.runtime_minutes),genres:i.genres.split(","),simple_title:i.primary_title.toLowerCase(),average_rating:Number(i.average_rating),num_votes:Number(i.num_votes)}))),W(b,T(e(d))),console.log("Loaded CSV Data:",e(d)),console.log("Final Year Count Array:",e(b)),await se()}catch(n){console.error("Error loading CSV:",n)}}fe(x);function C(n,r){alert(`Clicked on: ${r.primary_title} (${r.year.getFullYear()}) - Rating: ${r.average_rating}`)}function P(n){W(p,n)}ce();var j=He(),G=V(H(j),2),q=H(G,!0);X(G);var Q=V(G,2);{var $=n=>{var r=je(),i=bt(r),s=H(i),c=V(H(s));I(()=>{e(h),kt(()=>{})}),ot(c,5,()=>E,mt,(l,o)=>{var u=Ue(),z={},y=H(u,!0);X(u),I(()=>{z!==(z=e(o))&&(u.value=(u.__value=e(o))==null?"":e(o)),at(y,e(o))}),K(l,u)}),X(c),X(s);var m=V(s,2),A=V(H(m));I(()=>{e(h),kt(()=>{})}),ot(A,5,()=>E,mt,(l,o)=>{var u=Ie(),z={},y=H(u,!0);X(u),I(()=>{z!==(z=e(o))&&(u.value=(u.__value=e(o))==null?"":e(o)),at(y,e(o))}),K(l,u)}),X(A),X(m);var _=V(m,2),f=V(H(_));I(()=>{e(h),kt(()=>{})}),ot(f,5,()=>E,mt,(l,o)=>{var u=Ke(),z={},y=H(u,!0);X(u),I(()=>{z!==(z=e(o))&&(u.value=(u.__value=e(o))==null?"":e(o)),at(y,e(o))}),K(l,u)}),X(f),X(_),X(i);var k=V(i,2);const v=le(()=>e(p)?e(d).filter(l=>l.year>=e(p)[0]&&l.year<=e(p)[1]):e(d));Xe(k,{get movies(){return e(v)},get x(){return e(h).x},get y(){return e(h).y},get size(){return e(h).size},$$events:{click:C}});var w=V(k,4);Ge(w,{get data(){return e(b)},stroke:"black","stroke-width":"2",get yearRange(){return e(p)},set yearRange(l){W(p,l)},$$events:{brush:P},$$legacy:!0}),St(c,()=>e(h).x,l=>zt(h,e(h).x=l)),St(A,()=>e(h).y,l=>zt(h,e(h).y=l)),St(f,()=>e(h).size,l=>zt(h,e(h).size=l)),K(n,r)};Xt(Q,n=>{e(d).length>0&&n($)})}X(j),I(()=>at(q,e(d).length===0?"Loading...":`${e(d).length} movies`)),K(t,j),Pt()}export{un as component};
